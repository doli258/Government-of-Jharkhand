<% layout('layouts/boilerplate') %>
<div class="container mt-4">
  <h3>Electricity Department Dashboard</h3>
  <hr>

  <% if (complaints.length === 0) { %>
    <p class="text-muted">No complaints found for electricity department.</p>
  <% } else { %>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Title</th>
          <th>User</th>
          <th>Status</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% complaints.forEach(c => { %>
          <tr>
            <td><%= c.title %></td>
            <td><%= c.user ? c.user.name : "Anonymous" %></td>
            <td>
              <% if (c.status === "Pending") { %>
                <span class="badge bg-warning text-dark">Pending</span>
              <% } else { %>
                <span class="badge bg-success">Resolved</span>
              <% } %>
            </td>
            <td><%= c.createdAt ? c.createdAt.toDateString() : "" %></td>
            <td><a href="/complaints/<%= c._id %>" class="btn btn-sm btn-primary">View</a></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</div>
